---
title: "Pilot Experiment"
author: "Alisha Monsibais"
date: 'Start Date: 9-5-23 "/t" End Data: 9/12/23'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(root.dir = "", 
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)
```

# Project Summary 
STM strains (4) were grown to log phage OD600 of 0.3 (with overnight dilution of 1:20) and subjected to phage infection with a 3 phage cocktail (ANB28, KB824, SBP2@2) and an MOI of 0.01 (10^6 PFU/mL) and antibiotics. Antibiotics were reconstituted in DMSO and diluted to the following concentrations: SXT 8 ug/mL and MEM 0.5 ug/mL. DMSO control consisted of 0.04% and were ran along side bacteria controls. SM buffer was used in antibiotic only conditions, while Saline was ran in phage only conditions. Antibiotic and phage conditions were preformed in combination and alternating settings. All 4 strains had 3 biological replicates done in technical replicates. Phage Lysate were ran in media only to determine if there was any resistant bacteria only conditions. Blank consisted of Saline, SM buffer and Media. Plate 1 = B28B, Plate 2 = K279a, Plate3 = SM71PII, Plate4 = Lipton23. Plates were read on the LogPhase600 at 37C, nonshaking with manufacture lid, 10 min intervals for 24 hours and then passaged at a 1:20 dilution

## 1. Data Cleaning 
```{r loading packages, message=FALSE, warning=FALSE, include=FALSE}
library(knitr) #nice table output 
library(tidyverse)
library(reshape2) #helps melt data - data wrangling 
library(ggpubr)
library(growthcurver) #growth curve package 
library(ggbreak) #ggarrange 
library(broom)
library(dplyr)
library(gcplyr) #need to calculate auc https://mikeblazanin.github.io/gcplyr/articles/gcplyr.html
```

```{r loading in data}
#Day 1 Data 
Day1plate1 <- read.csv("230905_PilotExp_Day1_plate1.csv")
Day1plate2 <- read.csv("230905_PilotExp_Day1_plate2.csv")
Day1plate3 <- read.csv("230905_PilotExp_Day1_plate3.csv")
Day1plate4 <- read.csv("230905_PilotExp_Day1_plate4.csv")
#Day 2 Data
Day2plate1 <- read.csv("230906_PilotExp_Day2_plate1.csv")
Day2plate2 <- read.csv("230906_PilotExp_Day2_plate2.csv")
Day2plate3 <- read.csv("230906_PilotExp_Day2_plate3.csv")
Day2plate4 <- read.csv("230906_PilotExp_Day2_plate4.csv")
#Day 3 Data 
Day3plate1 <- read.csv("230907_PilotExp_Day3_plate1.csv")
Day3plate2 <- read.csv("230907_PilotExp_Day3_plate2.csv")
Day3plate3 <- read.csv("230907_PilotExp_Day3_plate3.csv")
Day3plate4 <- read.csv("230907_PilotExp_Day3_plate4.csv")
#Day 4 Data 
Day4plate1 <- read.csv("230908_PilotExp_Day4_plate1.csv")
Day4plate2 <- read.csv("230908_PilotExp_Day4_plate2.csv")
Day4plate3 <- read.csv("230908_PilotExp_Day4_plate3.csv")
Day4plate4 <- read.csv("230908_PilotExp_Day4_plate4.csv")
#Day 5 Data 
Day5plate1 <- read.csv("230909_PilotExp_Day5_plate1.csv")
Day5plate2 <- read.csv("230909_PilotExp_Day5_plate2.csv")
Day5plate3 <- read.csv("230909_PilotExp_Day5_plate3.csv")
Day5plate4 <- read.csv("230909_PilotExp_Day5_plate4.csv")
#Day 6 Data 
Day6plate1 <- read.csv("2309010_PilotExp_Day6_plate1.csv")
Day6plate2 <- read.csv("2309010_PilotExp_Day6_plate2.csv")
Day6plate3 <- read.csv("2309010_PilotExp_Day6_plate3.csv")
Day6plate4 <- read.csv("2309010_PilotExp_Day6_plate4.csv")
#Day 7 Data 
Day7plate1 <- read.csv("2309011_PilotExp_Day7_plate1.csv")
Day7plate2 <- read.csv("2309011_PilotExp_Day7_plate2.csv")
Day7plate3 <- read.csv("2309011_PilotExp_Day7_plate3.csv")
Day7plate4 <- read.csv("2309011_PilotExp_Day7_plate4.csv")


```

```{r loading in maps}
platemap1_odd <- read.csv("../platemaps/230905_platemap1_odd.csv")
platemap2_odd <- read.csv("../platemaps/230905_platemap2_odd.csv")
platemap3_odd <- read.csv("../platemaps/230905_platemap3_odd.csv")
platemap4_odd <- read.csv("../platemaps/230905_platemap4_odd.csv")

platemap1_even <- read.csv("../platemaps/230905_platemap1_even.csv")
platemap2_even <- read.csv("../platemaps/230905_platemap2_even.csv")
platemap3_even <- read.csv("../platemaps/230905_platemap3_even.csv")
platemap4_even <- read.csv("../platemaps/230905_platemap4_even.csv")

glimpse(Day1plate1)

```


```{r Data wragling, message=FALSE, warning=FALSE, include=FALSE}
##### Fix Data for MTC #####
#Rep 1
Time <- Day1plate1[,1] #makes vector time character string
Time <- Time[-c(1:6)] #removed 1-6 because format is incorrect
fix <- c("00:00:00","00:10:00","00:20:00", "00:30:00", "00:40:00", "00:50:00") #fixes format
Time <- append(fix, Time, after = length(fix)) #appends 
#Change vector of Time from HH:MM:SS to numeric hour format
Time <- sapply(strsplit(Time, ":"), function(x) {
  x <- as.numeric(x); x[1] + x[2]/60 + x[3]/3600
})
Day1plate1$Time <- NULL #removes Time column in data frame
Day1plate1 <- cbind(Time, Day1plate1) #adds new Time column to data frame with correct time format

#Now we can use the Time vector to correct the reset of the data 
Day1plate2$Time <- NULL #removes Time column in data frame
Day1plate2 <- cbind(Time, Day1plate2) #adds new Time column to data frame with correct time format

Day1plate3$Time <- NULL #removes Time column in data frame
Day1plate3 <- cbind(Time, Day1plate3) #adds new Time column to data frame with correct time format

#Day1plate4 - had different observations 
Time <- Day1plate4[,1] #makes vector time character string
Time <- Time[-c(1:6)] #removed 1-6 because format is incorrect
fix <- c("00:00:00","00:10:00","00:20:00", "00:30:00", "00:40:00", "00:50:00") #fixes format
Time <- append(fix, Time, after = length(fix)) #appends 
#Change vector of Time from HH:MM:SS to numeric hour format
Time <- sapply(strsplit(Time, ":"), function(x) {
  x <- as.numeric(x); x[1] + x[2]/60 + x[3]/3600
})
Day1plate4$Time <- NULL #removes Time column in data frame
Day1plate4 <- cbind(Time, Day1plate4) #adds new Time column to data frame with correct time format


#Day 2 data had only 29 observations due to instrument issue
#Rep 1
Time <- Day2plate1[,1] #makes vector time character string
Time <- Time[-c(1:6)] #removed 1-6 because format is incorrect
fix <- c("00:00:00","00:10:00","00:20:00", "00:30:00", "00:40:00", "00:50:00") #fixes format
Time <- append(fix, Time, after = length(fix)) #appends 
#Change vector of Time from HH:MM:SS to numeric hour format
Time <- sapply(strsplit(Time, ":"), function(x) {
  x <- as.numeric(x); x[1] + x[2]/60 + x[3]/3600
})
Day2plate1$Time <- NULL #removes Time column in data frame
Day2plate1 <- cbind(Time, Day2plate1) #adds new Time column to data frame with correct time format


#Now we can use the Time vector to correct the reset of the data 
Day2plate2$Time <- NULL #removes Time column in data frame
Day2plate2 <- cbind(Time, Day2plate2) #adds new Time column to data frame with correct time format

Day2plate3$Time <- NULL #removes Time column in data frame
Day2plate3 <- cbind(Time, Day2plate3) #adds new Time column to data frame with correct time format

Day2plate4$Time <- NULL #removes Time column in data frame
Day2plate4 <- cbind(Time, Day2plate4) #adds new Time column to data frame with correct time format

#Day 3-7 should be the same 
Time <- Day3plate1[,1] #makes vector time character string
Time <- Time[-c(1:6)] #removed 1-6 because format is incorrect
fix <- c("00:00:00","00:10:00","00:20:00", "00:30:00", "00:40:00", "00:50:00") #fixes format
Time <- append(fix, Time, after = length(fix)) #appends 
#Change vector of Time from HH:MM:SS to numeric hour format
Time <- sapply(strsplit(Time, ":"), function(x) {
  x <- as.numeric(x); x[1] + x[2]/60 + x[3]/3600
})
Day3plate1$Time <- NULL #removes Time column in data frame
Day3plate1 <- cbind(Time, Day3plate1) #adds new Time column to data frame with correct time format

#Now we can use the Time vector to correct the reset of the data 
Day3plate2$Time <- NULL #removes Time column in data frame
Day3plate2 <- cbind(Time, Day3plate2) #adds new Time column to data frame with correct time format

Day3plate3$Time <- NULL #removes Time column in data frame
Day3plate3 <- cbind(Time, Day3plate3) #adds new Time column to data frame with correct time format

Day3plate4$Time <- NULL #removes Time column in data frame
Day3plate4 <- cbind(Time, Day3plate4) #adds new Time column to data frame with correct time format

#Day 4 
#Now we can use the Time vector to correct the reset of the data 
Day4plate1$Time <- NULL #removes Time column in data frame
Day4plate1 <- cbind(Time, Day4plate1) #adds new Time column to data frame with correct time format

Day4plate2$Time <- NULL #removes Time column in data frame
Day4plate2 <- cbind(Time, Day4plate2) #adds new Time column to data frame with correct time format

Day4plate3$Time <- NULL #removes Time column in data frame
Day4plate3 <- cbind(Time, Day4plate3) #adds new Time column to data frame with correct time format

Day4plate4$Time <- NULL #removes Time column in data frame
Day4plate4 <- cbind(Time, Day4plate4) #adds new Time column to data frame with correct time format


#Day 5 
#Now we can use the Time vector to correct the reset of the data 
Day5plate1$Time <- NULL #removes Time column in data frame
Day5plate1 <- cbind(Time, Day5plate1) #adds new Time column to data frame with correct time format

Day5plate2$Time <- NULL #removes Time column in data frame
Day5plate2 <- cbind(Time, Day5plate2) #adds new Time column to data frame with correct time format

Day5plate3$Time <- NULL #removes Time column in data frame
Day5plate3 <- cbind(Time, Day5plate3) #adds new Time column to data frame with correct time format

Day5plate4$Time <- NULL #removes Time column in data frame
Day5plate4 <- cbind(Time, Day5plate4) #adds new Time column to data frame with correct time format


#Day 6
#Now we can use the Time vector to correct the reset of the data 
Day6plate1$Time <- NULL #removes Time column in data frame
Day6plate1 <- cbind(Time, Day6plate1) #adds new Time column to data frame with correct time format

Day6plate2$Time <- NULL #removes Time column in data frame
Day6plate2 <- cbind(Time, Day6plate2) #adds new Time column to data frame with correct time format

Day6plate3$Time <- NULL #removes Time column in data frame
Day6plate3 <- cbind(Time, Day6plate3) #adds new Time column to data frame with correct time format

Day6plate4$Time <- NULL #removes Time column in data frame
Day6plate4 <- cbind(Time, Day6plate4) #adds new Time column to data frame with correct time format


#Day 7
#Now we can use the Time vector to correct the reset of the data 
Day7plate1$Time <- NULL #removes Time column in data frame
Day7plate1 <- cbind(Time, Day7plate1) #adds new Time column to data frame with correct time format

Day7plate2$Time <- NULL #removes Time column in data frame
Day7plate2 <- cbind(Time, Day7plate2) #adds new Time column to data frame with correct time format

Day7plate3$Time <- NULL #removes Time column in data frame
Day7plate3 <- cbind(Time, Day7plate3) #adds new Time column to data frame with correct time format

Day7plate4$Time <- NULL #removes Time column in data frame
Day7plate4 <- cbind(Time, Day7plate4) #adds new Time column to data frame with correct time format

```


```{r melting data}
Day1plate1_melt <- melt(Day1plate1, id=("Time"), variable.name= "Well", value.name = "OD600")
Day1plate2_melt <- melt(Day1plate2, id=("Time"), variable.name= "Well", value.name = "OD600")
Day1plate3_melt <- melt(Day1plate3, id=("Time"), variable.name= "Well", value.name = "OD600")
Day1plate4_melt <- melt(Day1plate4, id=("Time"), variable.name= "Well", value.name = "OD600")

Day2plate1_melt <- melt(Day2plate1, id=("Time"), variable.name= "Well", value.name = "OD600")
Day2plate2_melt <- melt(Day2plate2, id=("Time"), variable.name= "Well", value.name = "OD600")
Day2plate3_melt <- melt(Day2plate3, id=("Time"), variable.name= "Well", value.name = "OD600")
Day2plate4_melt <- melt(Day2plate4, id=("Time"), variable.name= "Well", value.name = "OD600")

Day3plate1_melt <- melt(Day3plate1, id=("Time"), variable.name= "Well", value.name = "OD600")
Day3plate2_melt <- melt(Day3plate2, id=("Time"), variable.name= "Well", value.name = "OD600")
Day3plate3_melt <- melt(Day3plate3, id=("Time"), variable.name= "Well", value.name = "OD600")
Day3plate4_melt <- melt(Day3plate4, id=("Time"), variable.name= "Well", value.name = "OD600")

Day4plate1_melt <- melt(Day4plate1, id=("Time"), variable.name= "Well", value.name = "OD600")
Day4plate2_melt <- melt(Day4plate2, id=("Time"), variable.name= "Well", value.name = "OD600")
Day4plate3_melt <- melt(Day4plate3, id=("Time"), variable.name= "Well", value.name = "OD600")
Day4plate4_melt <- melt(Day4plate4, id=("Time"), variable.name= "Well", value.name = "OD600")

Day5plate1_melt <- melt(Day5plate1, id=("Time"), variable.name= "Well", value.name = "OD600")
Day5plate2_melt <- melt(Day5plate2, id=("Time"), variable.name= "Well", value.name = "OD600")
Day5plate3_melt <- melt(Day5plate3, id=("Time"), variable.name= "Well", value.name = "OD600")
Day5plate4_melt <- melt(Day5plate4, id=("Time"), variable.name= "Well", value.name = "OD600")

Day6plate1_melt <- melt(Day6plate1, id=("Time"), variable.name= "Well", value.name = "OD600")
Day6plate2_melt <- melt(Day6plate2, id=("Time"), variable.name= "Well", value.name = "OD600")
Day6plate3_melt <- melt(Day6plate3, id=("Time"), variable.name= "Well", value.name = "OD600")
Day6plate4_melt <- melt(Day6plate4, id=("Time"), variable.name= "Well", value.name = "OD600")

Day7plate1_melt <- melt(Day7plate1, id=("Time"), variable.name= "Well", value.name = "OD600")
Day7plate2_melt <- melt(Day7plate2, id=("Time"), variable.name= "Well", value.name = "OD600")
Day7plate3_melt <- melt(Day7plate3, id=("Time"), variable.name= "Well", value.name = "OD600")
Day7plate4_melt <- melt(Day7plate4, id=("Time"), variable.name= "Well", value.name = "OD600")
```


```{r annotating data from plate map, message=FALSE, warning=FALSE, include=FALSE}

Day1plate1_annotated <- inner_join(Day1plate1_melt, platemap1_odd, by='Well')
Day1plate2_annotated <- inner_join(Day1plate2_melt, platemap2_odd, by='Well')
Day1plate3_annotated <- inner_join(Day1plate3_melt, platemap3_odd, by='Well')
Day1plate4_annotated <- inner_join(Day1plate4_melt, platemap4_odd, by='Well')

Day2plate1_annotated <- inner_join(Day2plate1_melt, platemap1_even, by='Well')
Day2plate2_annotated <- inner_join(Day2plate2_melt, platemap2_even, by='Well')
Day2plate3_annotated <- inner_join(Day2plate3_melt, platemap3_even, by='Well')
Day2plate4_annotated <- inner_join(Day2plate4_melt, platemap4_even, by='Well')

Day3plate1_annotated <- inner_join(Day3plate1_melt, platemap1_odd, by='Well')
Day3plate2_annotated <- inner_join(Day3plate2_melt, platemap2_odd, by='Well')
Day3plate3_annotated <- inner_join(Day3plate3_melt, platemap3_odd, by='Well')
Day3plate4_annotated <- inner_join(Day3plate4_melt, platemap4_odd, by='Well')

Day4plate1_annotated <- inner_join(Day4plate1_melt, platemap1_even, by='Well')
Day4plate2_annotated <- inner_join(Day4plate2_melt, platemap2_even, by='Well')
Day4plate3_annotated <- inner_join(Day4plate3_melt, platemap3_even, by='Well')
Day4plate4_annotated <- inner_join(Day4plate4_melt, platemap4_even, by='Well')

Day5plate1_annotated <- inner_join(Day5plate1_melt, platemap1_odd, by='Well')
Day5plate2_annotated <- inner_join(Day5plate2_melt, platemap2_odd, by='Well')
Day5plate3_annotated <- inner_join(Day5plate3_melt, platemap3_odd, by='Well')
Day5plate4_annotated <- inner_join(Day5plate4_melt, platemap4_odd, by='Well')

Day6plate1_annotated <- inner_join(Day6plate1_melt, platemap1_even, by='Well')
Day6plate2_annotated <- inner_join(Day6plate2_melt, platemap2_even, by='Well')
Day6plate3_annotated <- inner_join(Day6plate3_melt, platemap3_even, by='Well')
Day6plate4_annotated <- inner_join(Day6plate4_melt, platemap4_even, by='Well')

Day7plate1_annotated <- inner_join(Day7plate1_melt, platemap1_odd, by='Well')
Day7plate2_annotated <- inner_join(Day7plate2_melt, platemap2_odd, by='Well')
Day7plate3_annotated <- inner_join(Day7plate3_melt, platemap3_odd, by='Well')
Day7plate4_annotated <- inner_join(Day7plate4_melt, platemap4_odd, by='Well')

```

```{r Plotting 96 well plate to check QC parameters, echo=FALSE, message=FALSE, warning=FALSE}

#Graphing in 96 well format to check plate bias or issues with potential contamination. 
png("230905_Day1plate1.png", units="in", width=10, height=6, res=600)
D1p1 <- ggplot(Day1plate1_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 1 - B28B") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D1p1
dev.off()

png("230905_Day1plate2.png", units="in", width=10, height=6, res=600)
D1p2 <- ggplot(Day1plate2_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 1 - K279a") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D1p2
dev.off()

png("230905_Day1plate3.png", units="in", width=10, height=6, res=600)
D1p3 <- ggplot(Day1plate3_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 1 - SM71PII") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D1p3
dev.off()

png("230905_Day1plate4.png", units="in", width=10, height=6, res=600)
D1p4 <- ggplot(Day1plate4_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 1 - Lipton23") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D1p4
dev.off()


png("230905_Day1.png", units="in", width=10, height=6, res=600)
Day1 <- ggarrange(D1p1, D1p2, D1p3, D1p4,
                      labels = c("A", "B", "C", "D"),
                      common.legend = TRUE, legend = "right")
Day1
dev.off()


```


```{r Day 2}

#Graphing in 96 well format to check plate bias or issues with potential contamination. 
png("230906_Day2plate1.png", units="in", width=10, height=6, res=600)
D2p1 <- ggplot(Day2plate1_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 2 - B28B") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D2p1
dev.off()

png("230906_Day2plate2.png", units="in", width=10, height=6, res=600)
D2p2 <- ggplot(Day2plate2_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 2 - K279a") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D2p2
dev.off()

png("230906_Day2plate3.png", units="in", width=10, height=6, res=600)
D2p3 <- ggplot(Day2plate3_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 2 - SM71PII") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D2p3
dev.off()

png("230906_Day2plate4.png", units="in", width=10, height=6, res=600)
D2p4 <- ggplot(Day2plate4_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 2 - Lipton23") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D2p4
dev.off()


png("230906_Day2.png", units="in", width=10, height=6, res=600)
Day2 <- ggarrange(D2p1, D2p2, D2p3, D2p4,
                      labels = c("A", "B", "C", "D"),
                      common.legend = TRUE, legend = "right")
Day2
dev.off()


```


```{r Day 3}

#Graphing in 96 well format to check plate bias or issues with potential contamination. 
png("230907_Day3plate1.png", units="in", width=10, height=6, res=600)
D3p1 <- ggplot(Day3plate1_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 3 - B28B") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D3p1
dev.off()

png("230907_Day3plate2.png", units="in", width=10, height=6, res=600)
D3p2 <- ggplot(Day3plate2_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 3 - K279a") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D3p2
dev.off()

png("230907_Day3plate3.png", units="in", width=10, height=6, res=600)
D3p3 <- ggplot(Day3plate3_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 3 - SM71PII") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D3p3
dev.off()

png("230907_Day3plate4.png", units="in", width=10, height=6, res=600)
D3p4 <- ggplot(Day3plate4_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 3 - Lipton23") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D3p4
dev.off()


png("230907_Day3.png", units="in", width=10, height=6, res=600)
Day3 <- ggarrange(D3p1, D3p2, D3p3, D3p4,
                      labels = c("A", "B", "C", "D"),
                      common.legend = TRUE, legend = "right")
Day3
dev.off()


```


```{r Day 4}

#Graphing in 96 well format to check plate bias or issues with potential contamination. 
png("230908_Day4plate1.png", units="in", width=10, height=6, res=600)
D4p1 <- ggplot(Day4plate1_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 4 - B28B") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D4p1
dev.off()

png("230908_Day4plate2.png", units="in", width=10, height=6, res=600)
D4p2 <- ggplot(Day4plate2_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 4 - K279a") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D4p2
dev.off()

png("230908_Day4plate3.png", units="in", width=10, height=6, res=600)
D4p3 <- ggplot(Day4plate3_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 4 - SM71PII") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D4p3
dev.off()

png("230908_Day4plate4.png", units="in", width=10, height=6, res=600)
D4p4 <- ggplot(Day4plate4_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 4 - Lipton23") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D4p4
dev.off()


png("230908_Day4.png", units="in", width=10, height=6, res=600)
Day4 <- ggarrange(D4p1, D4p2, D4p3, D4p4,
                      labels = c("A", "B", "C", "D"),
                      common.legend = TRUE, legend = "right")
Day4
dev.off()


```



```{r Day 5}

#Graphing in 96 well format to check plate bias or issues with potential contamination. 
png("230909_Day5plate1.png", units="in", width=10, height=6, res=600)
D5p1 <- ggplot(Day5plate1_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 5 - B28B") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D5p1
dev.off()

png("230909_Day5plate2.png", units="in", width=10, height=6, res=600)
D5p2 <- ggplot(Day5plate2_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 5 - K279a") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D5p2
dev.off()

png("230909_Day5plate3.png", units="in", width=10, height=6, res=600)
D5p3 <- ggplot(Day5plate3_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 5 - SM71PII") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D5p3
dev.off()

png("230909_Day5plate4.png", units="in", width=10, height=6, res=600)
D5p4 <- ggplot(Day5plate4_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 5 - Lipton23") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D5p4
dev.off()


png("230909_Day5.png", units="in", width=10, height=6, res=600)
Day5 <- ggarrange(D5p1, D5p2, D5p3, D5p4,
                      labels = c("A", "B", "C", "D"),
                      common.legend = TRUE, legend = "right")
Day5
dev.off()


```


```{r Day 6}

#Graphing in 96 well format to check plate bias or issues with potential contamination. 
png("230910_Day6plate1.png", units="in", width=10, height=6, res=600)
D6p1 <- ggplot(Day6plate1_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 6 - B28B") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D6p1
dev.off()

png("230910_Day6plate2.png", units="in", width=10, height=6, res=600)
D6p2 <- ggplot(Day1plate2_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 6 - K279a") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D6p2
dev.off()

png("230910_Day6plate3.png", units="in", width=10, height=6, res=600)
D6p3 <- ggplot(Day1plate3_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 6 - SM71PII") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D6p3
dev.off()

png("230910_Day6plate4.png", units="in", width=10, height=6, res=600)
D6p4 <- ggplot(Day1plate4_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 6 - Lipton23") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D6p4
dev.off()


png("230911_Day6.png", units="in", width=10, height=6, res=600)
Day6 <- ggarrange(D6p1, D6p2, D6p3, D6p4,
                      labels = c("A", "B", "C", "D"),
                      common.legend = TRUE, legend = "right")
Day6
dev.off()


```


```{r Day 7}

#Graphing in 96 well format to check plate bias or issues with potential contamination. 
png("230911_Day7plate1.png", units="in", width=10, height=6, res=600)
D7p1 <- ggplot(Day7plate1_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 7 - B28B") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D7p1
dev.off()

png("230911_Day7plate2.png", units="in", width=10, height=6, res=600)
D7p2 <- ggplot(Day7plate2_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 7 - K279a") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D7p2
dev.off()

png("230911_Day7plate3.png", units="in", width=10, height=6, res=600)
D7p3 <- ggplot(Day7plate3_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 7 - SM71PII") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D7p3
dev.off()

png("230911_Day7plate4.png", units="in", width=10, height=6, res=600)
D7p4 <- ggplot(Day7plate4_annotated, aes(x=Time, y=OD600, color = Cond))+
  ggtitle("Pilot Experiment - Day 7 - Lipton23") +
  geom_line() +
  labs(x="Time(Hours)", y ="OD600nm") +
  theme(
    plot.title = element_text(size=12, hjust = 0.5, face="bold"),
    axis.title.x = element_text(size=9, face="bold"),
    axis.title.y = element_text(size=9, face="bold"), 
    axis.text.x = element_text(size=5), 
    axis.text.y = element_text(size=5))+
  facet_grid(Letter~Column) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
D7p4
dev.off()


png("230911_Day7.png", units="in", width=10, height=6, res=600)
Day7 <- ggarrange(D7p1, D7p2, D7p3, D7p4,
                      labels = c("A", "B", "C", "D"),
                      common.legend = TRUE, legend = "right")
Day7
dev.off()


```

```{r AUC/Fold Change - B28B}

Day1plate1_clean <- Day1plate1_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day1")
  
Day2plate1_clean <- Day2plate1_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day2")        

Day3plate1_clean <- Day3plate1_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day3")

Day4plate1_clean <- Day4plate1_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day4")

Day5plate1_clean <- Day5plate1_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day5")

Day6plate1_clean <- Day6plate1_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day6")

Day7plate1_clean <- Day7plate1_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day7")

#Combinds all the data 
B28B_data <- Day1plate1_clean %>%
  union_all(Day2plate1_clean) %>%
  union_all(Day3plate1_clean) %>%
  union_all(Day4plate1_clean) %>%
  union_all(Day5plate1_clean) %>%
  union_all(Day6plate1_clean) %>%
  union_all(Day7plate1_clean)
  
png("B28B.png", units="in", width=10, height=6, res=600)
B28B_data %>%
  ggplot(aes(Cond, foldchange, fill = Cond)) + geom_col() +
  ggtitle("B28B - Fold Change") + ylab("Fold Change")+ xlab("Condition") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 15),
        axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1,color = "black", size = 10),
        axis.text.y = element_text(color = "black", size = 10),
        axis.title.x = element_text(color = "black", size = 12, face = "bold"), 
        axis.title.y = element_text(color = "black", size = 12, face = "bold")) +
  facet_grid(.~Day)
dev.off()
```

```{r AUC/Fold Change - K279a}

Day1plate2_clean <- Day1plate2_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day1")
  
Day2plate2_clean <- Day2plate2_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day2")        

Day3plate2_clean <- Day3plate2_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day3")

Day4plate2_clean <- Day4plate2_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day4")

Day5plate2_clean <- Day5plate2_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day5")

Day6plate2_clean <- Day6plate2_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day6")

Day7plate2_clean <- Day7plate2_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day7")

#Combinds all the data 
K279a_data <- Day1plate2_clean %>%
  union_all(Day2plate2_clean) %>%
  union_all(Day3plate2_clean) %>%
  union_all(Day4plate2_clean) %>%
  union_all(Day5plate2_clean) %>%
  union_all(Day6plate2_clean) %>%
  union_all(Day7plate2_clean)
  
png("K279a.png", units="in", width=10, height=6, res=600)
K279a_data %>%
  ggplot(aes(Cond, foldchange, fill = Cond)) + geom_col() +
  ggtitle("K279a - Fold Change") + ylab("Fold Change")+ xlab("Condition") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 15),
        axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1,color = "black", size = 10),
        axis.text.y = element_text(color = "black", size = 10),
        axis.title.x = element_text(color = "black", size = 12, face = "bold"), 
        axis.title.y = element_text(color = "black", size = 12, face = "bold")) +
  facet_grid(.~Day)
dev.off()
```

```{r AUC/Fold Change - SM71PII}

Day1plate3_clean <- Day1plate3_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day1")
  
Day2plate3_clean <- Day2plate3_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day2")        

Day3plate3_clean <- Day3plate3_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day3")

Day4plate3_clean <- Day4plate3_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day4")

Day5plate3_clean <- Day5plate3_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day5")

Day6plate3_clean <- Day6plate3_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day6")

Day7plate3_clean <- Day7plate3_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day7")

#Combinds all the data 
SM71PII_data <- Day1plate3_clean %>%
  union_all(Day2plate3_clean) %>%
  union_all(Day3plate3_clean) %>%
  union_all(Day4plate3_clean) %>%
  union_all(Day5plate3_clean) %>%
  union_all(Day6plate3_clean) %>%
  union_all(Day7plate3_clean)
  
png("SM71PII.png", units="in", width=10, height=6, res=600)
SM71PII_data %>%
  ggplot(aes(Cond, foldchange, fill = Cond)) + geom_col() +
  ggtitle("SM71PII - Fold Change") + ylab("Fold Change")+ xlab("Condition") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 15),
        axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1,color = "black", size = 10),
        axis.text.y = element_text(color = "black", size = 10),
        axis.title.x = element_text(color = "black", size = 12, face = "bold"), 
        axis.title.y = element_text(color = "black", size = 12, face = "bold")) +
  facet_grid(.~Day)
dev.off()
```
```{r AUC/Fold Change - SM71PII}

Day1plate4_clean <- Day1plate4_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day1")
  
Day2plate4_clean <- Day2plate4_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day2")        

Day3plate4_clean <- Day3plate4_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day3")

Day4plate4_clean <- Day4plate4_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day4")

Day5plate4_clean <- Day5plate4_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day5")

Day6plate4_clean <- Day6plate4_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day6")

Day7plate4_clean <- Day7plate4_annotated %>% 
  mutate(Time = round(Time, 1)) %>% #rounds time 
  filter(Strain != "water") %>% #removed water perimeter
  group_by(Well, Strain, Rep1, Cond) %>% #groups by Well, Strain, Rep, Cond
  summarise(uncorrected_auc = auc(y = OD600, x = as.numeric(Time))) %>% #summarise auc
  ungroup() %>% # ungroups to remove rep information 
  mutate(blank = mean(uncorrected_auc[Cond =="Blank"])) %>% #add a new column avg blank
  mutate(auc = uncorrected_auc - blank) %>% group_by(Cond) %>%
  summarise(Avg_AUC = mean(auc)) %>%
  mutate(AvgBac_AUC = Avg_AUC[Cond =='Bacteria Control']) %>%
  mutate(foldchange = Avg_AUC/AvgBac_AUC-1) %>% 
  mutate(Day = "Day7")

#Combinds all the data 
Lipton23_data <- Day1plate4_clean %>%
  union_all(Day2plate4_clean) %>%
  union_all(Day3plate4_clean) %>%
  union_all(Day4plate4_clean) %>%
  union_all(Day5plate4_clean) %>%
  union_all(Day6plate4_clean) %>%
  union_all(Day7plate4_clean)
  
png("Lipton23.png", units="in", width=10, height=6, res=600)
Lipton23_data %>%
  ggplot(aes(Cond, foldchange, fill = Cond)) + geom_col() +
  ggtitle("Lipton23 - Fold Change") + ylab("Fold Change")+ xlab("Condition") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 15),
        axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1,color = "black", size = 10),
        axis.text.y = element_text(color = "black", size = 10),
        axis.title.x = element_text(color = "black", size = 12, face = "bold"), 
        axis.title.y = element_text(color = "black", size = 12, face = "bold")) +
  facet_grid(.~Day)
dev.off()
```


